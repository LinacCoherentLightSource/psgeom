# psgeom
[![Build Status](https://travis-ci.org/slaclab/psgeom.svg?branch=master)](https://travis-ci.org/slaclab/psgeom)

psgeom aims to provide an easy to use code base for common geometrical 
operations during scattering experiments, such as:
* load/save multiple geometry formats
* translate/rotate parts of a detector
* easily compute reciprocal/polar space coordinates
* perform angular integration

User-friendliness is emphasized. The software aims to be general
but not sacrifice simplicity.

Chances are that if you need to compute stuff relating to scattering
geometry for a particular experiment, psgeom has what you need, and
it will be easy to use.

Currently, interfaces exist to geometry formats from:
* psana
* CrystFEL
* cheetah
* DIALS
* LCLS detector group metrologies
* a simple flat text / HDF5 pixel map

TJ Lane <thomas.joseph.lane@gmail.com>

------

** Example **

Here's a quick example of how to use this code. Imagine I have a geometry file
on the psana machines `1-end.data` that I want to load and manipulate. You can
find an example of such a file in the `ref_files` directory in this repo.

Then,

```
from psgeom import camera

cspad = camera.Cspad.from_psana_file('1-end.data')
print(cspad.draw_tree())     # see the heirarchy of sensors
print(cspad.xyz)             # get the xyz coordinates of all pixels

cspad.to_cheetah_file('my_new_cheetah_geom.h5')
```

-------

*** Quick Links ***

Information about the psana geometry:
https://confluence.slac.stanford.edu/display/PSDM/Detector+Geometry

List of high quality geometries generated by users and optical metrologies generated by LCLS:
https://confluence.slac.stanford.edu/display/PSDM/Geometry+History

CrystFEL Geometry:
http://www.desy.de/~twhite/crystfel/manual-crystfel_geometry.html


